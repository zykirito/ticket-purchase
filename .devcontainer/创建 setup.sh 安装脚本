#!/bin/bash
echo "ğŸš€ å¼€å§‹é…ç½®å¤§éº¦æŠ¢ç¥¨è‡ªåŠ¨åŒ–ç¯å¢ƒ..."

# æ›´æ–°aptåŒ…ç®¡ç†å™¨
apt-get update

# 1. å®‰è£…Appium
echo "ğŸ“¦ å®‰è£…Appium..."
npm install -g appium
npm install -g appium-doctor
appium driver install uiautomator2
appium driver install xcuitest

# 2. å®‰è£…Pythonä¾èµ–
echo "ğŸ å®‰è£…Pythonä¾èµ–..."
pip install --upgrade pip
pip install appium-python-client==2.11.1
pip install selenium==4.18.1
pip install pytest
pip install requests

# 3. å®‰è£…Androidå·¥å…·
echo "ğŸ“± å®‰è£…Androidå·¥å…·..."
sdkmanager "platform-tools" "platforms;android-33" "build-tools;33.0.0"

# 4. é…ç½®ç¯å¢ƒå˜é‡
echo "âš™ï¸ é…ç½®ç¯å¢ƒå˜é‡..."
echo 'export ANDROID_HOME=/usr/local/lib/android/sdk' >> ~/.bashrc
echo 'export ANDROID_SDK_ROOT=/usr/local/lib/android/sdk' >> ~/.bashrc
echo 'export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools' >> ~/.bashrc
source ~/.bashrc

# 5. åˆ›å»ºAndroidè™šæ‹Ÿè®¾å¤‡
echo "ğŸ“² åˆ›å»ºAndroidè™šæ‹Ÿè®¾å¤‡..."
echo "no" | avdmanager create avd -n Pixel_6_API_33 -k "system-images;android-33;google_apis;x86_64" -d "pixel_6"

# 6. éªŒè¯ç¯å¢ƒ
echo "âœ… éªŒè¯ç¯å¢ƒé…ç½®..."
appium-doctor --android
python3 --version
node --version
adb version

echo "ğŸ‰ ç¯å¢ƒé…ç½®å®Œæˆï¼"
echo "ğŸ“ ä¸‹ä¸€æ­¥ï¼š"
echo "1. å¯åŠ¨Androidæ¨¡æ‹Ÿå™¨: ./start-emulator.sh"
echo "2. å¯åŠ¨AppiumæœåŠ¡: ./start-appium.sh"
echo "3. è¿è¡ŒæŠ¢ç¥¨è„šæœ¬: python damai_app_v2.py"
